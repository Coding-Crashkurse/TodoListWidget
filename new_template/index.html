<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Todo App</title>

    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <py-register-widget src="/pylist.py" name="py-table" klass="PyList"></py-register-widget>


    <py-script>
      from datetime import datetime as dt

      def add_task(*ags, **kws):

        # create a new dictionary representing the new task
        task = { "content": new_task_content.value,  "done": False, "created_at": dt.now().strftime("%Y-%m-%d %H:%M") }

        # add a new task to the list and tell it to use the `content` key to show in the UI
        # and to use the key `done` to sync the task status with a checkbox element in the UI
        myTable.add(task)

        # clear the inputbox element used to create the new task
        new_task_content.clear()

    </py-script>
  </head>

  <body>
      <py-title>To Do List</py-title>
      <py-box widths="4/5;1/5">
        <py-inputbox id="new-task-content" colors="text-red-600">
          def on_keypress(e):
            if (e.code == "Enter"):
              add_task()
        </py-inputbox>
        <py-button id="new-task-btn" label="Add Task!">
          def on_click(evt):
            add_task()
        </py-button>
      </py-box>

        <div class="w-5/6 m-auto shadow-sm mt-6">
          <div class="text-center font-bold">
            <h1 class="text-xl">Our custom Table</h1>
          </div>
          <py-table id="myTable"></py-table>
        </div>

      </table>

      <div >

      </div>


  </body>
</html>